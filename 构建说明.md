# XHS-Downloader 一键构建说明

## 🎯 目标

为用户提供无需安装 Python 环境的可执行文件，支持：
- ✅ Windows x64
- ✅ macOS ARM64 (Apple Silicon) 
- ✅ macOS x64 (Intel)

## 🚀 快速构建

### Windows 用户

1. **双击运行** `build.bat`
2. 等待构建完成
3. 在 `dist/` 目录获取 `XHS-Downloader.exe`

### macOS/Linux 用户

1. **打开终端**，进入项目目录
2. **运行构建脚本**：
   ```bash
   ./build.sh
   ```
3. 在 `dist/` 目录获取 `XHS-Downloader`

### 手动构建（高级用户）

```bash
# 安装构建依赖
pip install -r requirements.txt

# 运行构建脚本
python build.py
```

## 📦 输出文件

构建成功后，在 `dist/` 目录会生成：

```
dist/
├── XHS-Downloader(.exe)          # 主程序
├── XHS-Downloader-平台-info.txt   # 使用说明
└── settings.json                 # 配置文件
```

## 💡 使用方法

### Windows
```cmd
# 图形界面模式
XHS-Downloader.exe

# 服务器模式  
XHS-Downloader.exe server

# 命令行帮助
XHS-Downloader.exe --help
```

### macOS/Linux
```bash
# 图形界面模式
./XHS-Downloader

# 服务器模式
./XHS-Downloader server

# 命令行帮助  
./XHS-Downloader --help
```

## 📋 系统要求

### 构建环境
- Python 3.12
- 网络连接（下载依赖）
- 足够的磁盘空间（约 500MB）

### 运行环境
- **Windows**: Windows 10 或更高版本
- **macOS**: macOS 11.0 或更高版本  
- **内存**: 建议 4GB 以上
- **磁盘**: 程序约 100MB，下载文件需额外空间

## 🔧 文件说明

| 文件 | 用途 |
|------|------|
| `build.py` | 主构建脚本 |
| `build.bat` | Windows 一键构建 |
| `build.sh` | macOS/Linux 一键构建 |
| `xhs_downloader.spec` | PyInstaller 配置 |
| `build_requirements.txt` | 构建依赖 |
| `BUILD.md` | 详细构建文档 |

## ❓ 常见问题

**Q: 构建失败怎么办？**
A: 检查 Python 版本是否为 3.12，网络是否正常

**Q: 可执行文件很大正常吗？**  
A: 正常，约 80-130MB，包含完整运行时

**Q: 杀毒软件报毒？**
A: PyInstaller 打包的程序常见误报，可添加信任

**Q: 需要为每个平台单独构建吗？**
A: 是的，需要在对应平台上构建对应的版本

## 🎉 发布建议

1. **命名规范**：
   - `XHS-Downloader-windows-x64.exe`
   - `XHS-Downloader-macos-arm64`
   - `XHS-Downloader-macos-x64`

2. **压缩发布**：
   ```bash
   # Windows
   zip XHS-Downloader-windows.zip XHS-Downloader.exe
   
   # macOS
   tar -czf XHS-Downloader-macos.tar.gz XHS-Downloader
   ```

3. **提供校验**：
   ```bash
   # 生成 SHA256
   sha256sum XHS-Downloader > XHS-Downloader.sha256
   ```

---
**注意**: 首次运行时程序会在当前目录创建配置文件，请确保运行目录有写入权限。